import{r as c,u,a as x,Q as r,j as t}from"./index-a406e721.js";import{a as h,C as g}from"./Container-68105fd1.js";import{f}from"./fetchEventById-10c47683.js";import{L as B}from"./Loader-ca366dfc.js";import{B as j}from"./BackButton-7f626a28.js";const v=async s=>{try{const{data:n}=await h.delete(`/events/${s}`);return n}catch(n){console.log(n)}},z="_title_85zy1_1",N="_card_85zy1_6",E="_pictureBox_85zy1_24",b="_picture_85zy1_24",w="_categoryWrap_85zy1_35",C="_category_85zy1_35",k="_priority_85zy1_41",I="_location_85zy1_42",L="_time_85zy1_43",P="_infoBox_85zy1_92",W="_info_85zy1_92",D="_timetable_85zy1_106",F="_description_85zy1_122",S="_deleteBtn_85zy1_130",T="_infoBtn_85zy1_150",$="_buttonContainer_85zy1_154",H="_editBtn_85zy1_162",e={title:z,card:N,pictureBox:E,picture:b,categoryWrap:w,category:C,priority:k,location:I,time:L,infoBox:P,info:W,timetable:D,description:F,deleteBtn:S,infoBtn:T,buttonContainer:$,editBtn:H},O=()=>{const[s,n]=c.useState(null),[l,d]=c.useState(!1),{id:i}=u(),_=x();c.useEffect(()=>{y(i)},[i]);const y=async o=>{d(!0);try{const a=await f(o);n(a)}catch{r.error("Oops, something went wrong! Please try again later",{position:"top-right",autoClose:2e3})}finally{d(!1)}},p=async o=>{try{await v(o),n(null),r.success("The event was successfully deleted ")}catch{r.error("Something went wrong, please try again")}},m=()=>{p(i),_("/")};return t.jsxs(t.Fragment,{children:[l&&t.jsx(B,{}),s&&!l&&t.jsxs(t.Fragment,{children:[t.jsx("h1",{className:e.title,children:s.title}),t.jsxs("div",{className:e.card,children:[t.jsx("div",{className:e.pictureBox,children:t.jsx("img",{src:s.picture,width:"272",height:"296",alt:s.title,className:e.picture})}),t.jsxs("div",{className:e.info,children:[t.jsxs("p",{className:e.description,children:[s.description," "]}),t.jsx("div",{className:e.infoBox,children:t.jsxs("div",{className:e.categoryWrap,children:[t.jsx("div",{className:e.category,children:s.category}),t.jsx("div",{className:e.priority,"data-priority":s.priority,children:s.priority}),t.jsx("span",{className:e.location,children:s.location}),t.jsxs("span",{className:e.time,children:[s.selectDate," at ",s.selectTime]})]})}),t.jsxs("div",{className:e.buttonContainer,children:[t.jsx("button",{className:e.editBtn,type:"button",onClick:()=>_(`/events/${s._id}/edit`),children:"Edit"}),t.jsx("button",{className:e.deleteBtn,type:"button",onClick:m,children:"Delete event"})]})]})]})]})]})},Q=()=>t.jsx(t.Fragment,{children:t.jsxs(g,{children:[t.jsx(j,{}),t.jsx(O,{})]})});Q.displayName="EventPage";export{Q as default};
