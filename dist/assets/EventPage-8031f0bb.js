import{r as i,u,a as y,Q as c,j as t}from"./index-a37a6f9a.js";import{a as h,C as g}from"./Container-46991aba.js";import{f as j}from"./fetchEventById-07069db7.js";import{L as v}from"./Loader-11872891.js";import{B as f}from"./BackButton-82cef0f8.js";const B=async a=>{try{const{data:s}=await h.delete(`/events/${a}`);return s}catch(s){console.log(s)}},k="_cardWrapper_alko0_1",N="_titleWrapper_alko0_17",E="_title_alko0_17",W="_card_alko0_1",b="_pictureBox_alko0_40",C="_picture_alko0_40",w="_categoryWrap_alko0_62",I="_category_alko0_62",L="_priority_alko0_68",P="_location_alko0_69",D="_time_alko0_70",F="_infoBox_alko0_122",S="_info_alko0_122",T="_timetable_alko0_136",$="_description_alko0_152",H="_deleteBtn_alko0_160",O="_infoBtn_alko0_180",Q="_buttonContainer_alko0_184",R="_editBtn_alko0_192",e={cardWrapper:k,titleWrapper:N,title:E,card:W,pictureBox:b,picture:C,categoryWrap:w,category:I,priority:L,location:P,time:D,infoBox:F,info:S,timetable:T,description:$,deleteBtn:H,infoBtn:O,buttonContainer:Q,editBtn:R},q=()=>{const[a,s]=i.useState(null),[l,d]=i.useState(!1),{id:o}=u(),p=y();i.useEffect(()=>{_(o)},[o]);const _=async n=>{d(!0);try{const r=await j(n);s(r)}catch{c.error("Oops, something went wrong! Please try again later",{position:"top-right",autoClose:2e3})}finally{d(!1)}},m=async n=>{try{await B(n),s(null),c.success("The event was successfully deleted ")}catch{c.error("Something went wrong, please try again")}},x=()=>{m(o),p("/")};return t.jsxs(t.Fragment,{children:[l&&t.jsx(v,{}),a&&!l&&t.jsx(t.Fragment,{children:t.jsxs("div",{className:e.cardWrapper,children:[t.jsx("div",{className:e.titleWrapper,children:t.jsx("h2",{className:e.title,children:a.title})}),t.jsxs("div",{className:e.card,children:[t.jsx("div",{className:e.pictureBox,children:t.jsx("img",{src:a.picture,alt:a.title,className:e.picture})}),t.jsxs("div",{className:e.info,children:[t.jsxs("p",{className:e.description,children:[a.description," "]}),t.jsx("div",{className:e.infoBox,children:t.jsxs("div",{className:e.categoryWrap,children:[t.jsx("div",{className:e.category,children:a.category}),t.jsx("div",{className:e.priority,"data-priority":a.priority,children:a.priority}),t.jsx("span",{className:e.location,children:a.location}),t.jsxs("span",{className:e.time,children:[a.selectDate," at ",a.selectTime]})]})}),t.jsxs("div",{className:e.buttonContainer,children:[t.jsx("button",{className:e.editBtn,type:"button",onClick:()=>p(`/events/${a._id}/edit`),children:"Edit"}),t.jsx("button",{className:e.deleteBtn,type:"button",onClick:x,children:"Delete event"})]})]})]})]})})]})},z=()=>t.jsx(t.Fragment,{children:t.jsxs(g,{children:[t.jsx(f,{}),t.jsx(q,{})]})});z.displayName="EventPage";export{z as default};
