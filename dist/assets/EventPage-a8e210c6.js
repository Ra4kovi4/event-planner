import{r as o,u as x,a as u,Q as c,j as t}from"./index-c25f80cf.js";import{a as h,C as y}from"./Container-2afa22b8.js";import{f as g}from"./fetchEventById-290bf355.js";import{L as v}from"./Loader-212da8a2.js";import{B as f}from"./BackButton-689ab5ca.js";const B=async i=>{try{const{data:s}=await h.delete(`/events/${i}`);return s}catch(s){console.log(s)}},N="_cardWrapper_ij426_1",E="_titleWrapper_ij426_17",W="_title_ij426_17",b="_card_ij426_1",w="_pictureBox_ij426_40",C="_picture_ij426_40",k="_categoryWrap_ij426_51",I="_category_ij426_51",L="_priority_ij426_57",P="_location_ij426_58",D="_time_ij426_59",F="_infoBox_ij426_111",S="_info_ij426_111",T="_timetable_ij426_125",$="_description_ij426_141",H="_deleteBtn_ij426_149",O="_infoBtn_ij426_169",Q="_buttonContainer_ij426_173",R="_editBtn_ij426_181",e={cardWrapper:N,titleWrapper:E,title:W,card:b,pictureBox:w,picture:C,categoryWrap:k,category:I,priority:L,location:P,time:D,infoBox:F,info:S,timetable:T,description:$,deleteBtn:H,infoBtn:O,buttonContainer:Q,editBtn:R},q=()=>{const[i,s]=o.useState(null),[l,d]=o.useState(!1),{id:n}=x(),p=u();o.useEffect(()=>{_(n)},[n]);const _=async a=>{d(!0);try{const r=await g(a);s(r)}catch{c.error("Oops, something went wrong! Please try again later",{position:"top-right",autoClose:2e3})}finally{d(!1)}},j=async a=>{try{await B(a),s(null),c.success("The event was successfully deleted ")}catch{c.error("Something went wrong, please try again")}},m=()=>{j(n),p("/")};return t.jsxs(t.Fragment,{children:[l&&t.jsx(v,{}),i&&!l&&t.jsx(t.Fragment,{children:t.jsxs("div",{className:e.cardWrapper,children:[t.jsx("div",{className:e.titleWrapper,children:t.jsx("h3",{className:e.title,children:i.title})}),t.jsxs("div",{className:e.card,children:[t.jsx("div",{className:e.pictureBox,children:t.jsx("img",{src:i.picture,width:"272",height:"296",alt:i.title,className:e.picture})}),t.jsxs("div",{className:e.info,children:[t.jsxs("p",{className:e.description,children:[i.description," "]}),t.jsx("div",{className:e.infoBox,children:t.jsxs("div",{className:e.categoryWrap,children:[t.jsx("div",{className:e.category,children:i.category}),t.jsx("div",{className:e.priority,"data-priority":i.priority,children:i.priority}),t.jsx("span",{className:e.location,children:i.location}),t.jsxs("span",{className:e.time,children:[i.selectDate," at ",i.selectTime]})]})}),t.jsxs("div",{className:e.buttonContainer,children:[t.jsx("button",{className:e.editBtn,type:"button",onClick:()=>p(`/events/${i._id}/edit`),children:"Edit"}),t.jsx("button",{className:e.deleteBtn,type:"button",onClick:m,children:"Delete event"})]})]})]})]})})]})},z=()=>t.jsx(t.Fragment,{children:t.jsxs(y,{children:[t.jsx(f,{}),t.jsx(q,{})]})});z.displayName="EventPage";export{z as default};
