import{e as j,r as v,f as B,d as m,E as x,Q as c,j as t}from"./index-eac931ff.js";import{f as N}from"./fetchEventById-c05d1323.js";import{L as E}from"./Loader-b88e09cb.js";import{u as g,C as b}from"./Container-968ac818.js";import{B as W}from"./BackButton-d4fa7efa.js";const C=async s=>{try{const{data:n}=await j.delete(`/events/${s}`);return n}catch(n){console.log(n)}},k="_cardWrapper_9vswd_1",P="_titleWrapper_9vswd_17",$="_title_9vswd_17",I="_card_9vswd_1",L="_pictureBox_9vswd_40",D="_picture_9vswd_40",F="_categoryWrap_9vswd_62",T="_category_9vswd_62",H="_priority_9vswd_68",S="_location_9vswd_69",O="_time_9vswd_70",Q="_infoBox_9vswd_122",R="_info_9vswd_122",q="_timetable_9vswd_136",z="_description_9vswd_152",A="_deleteBtn_9vswd_160",G="_infoBtn_9vswd_180",J="_buttonContainer_9vswd_190",K="_editBtn_9vswd_198",e={cardWrapper:k,titleWrapper:P,title:$,card:I,pictureBox:L,picture:D,categoryWrap:F,category:T,priority:H,location:S,time:O,infoBox:Q,info:R,timetable:q,description:z,deleteBtn:A,infoBtn:G,buttonContainer:J,editBtn:K},M=()=>{const[s,n]=v.useState(null),{id:a}=B(),o=m(),{events:u,isLoading:l,page:d,totalPage:V,setIsLoading:r,getEvents:p,decrementTotalPage:y}=g(x);v.useEffect(()=>{h(a)},[a]);const h=async i=>{r(!0);try{const _=await N(i);n(_)}catch{c.error("Oops, something went wrong! Please try again later",{position:"top-right",autoClose:2e3})}finally{r(!1)}},f=async()=>{r(!0);try{const i=await C(a);n(null),i&&p(),c.success("The event was successfully deleted ")}catch{c.error("Something went wrong, please try again")}finally{r(!1),p()}},w=()=>{f(),u.length===1?(o(`/?page=${d-1}`),y()):o(`/?page=${d}`)};return t.jsxs(t.Fragment,{children:[l&&t.jsx(E,{}),s&&!l&&t.jsx(t.Fragment,{children:t.jsxs("div",{className:e.cardWrapper,children:[t.jsx("div",{className:e.titleWrapper,children:t.jsx("h2",{className:e.title,children:s.title})}),t.jsxs("div",{className:e.card,children:[t.jsx("div",{className:e.pictureBox,children:t.jsx("img",{src:s.picture,alt:s.title,className:e.picture})}),t.jsxs("div",{className:e.info,children:[t.jsxs("p",{className:e.description,children:[s.description," "]}),t.jsx("div",{className:e.infoBox,children:t.jsxs("div",{className:e.categoryWrap,children:[t.jsx("div",{className:e.category,children:s.category}),t.jsx("div",{className:e.priority,"data-priority":s.priority,children:s.priority}),t.jsx("span",{className:e.location,children:s.location}),t.jsxs("span",{className:e.time,children:[s.selectDate," at ",s.selectTime]})]})}),t.jsxs("div",{className:e.buttonContainer,children:[t.jsx("button",{className:e.editBtn,type:"button",onClick:()=>o(`/events/${s._id}/edit`),children:"Edit"}),t.jsx("button",{className:e.deleteBtn,type:"button",onClick:w,children:"Delete event"})]})]})]})]})})]})},U=()=>{const s=m(),{page:n}=g(x),a=()=>{s(`/?page=${n}`)};return t.jsx(t.Fragment,{children:t.jsxs(b,{children:[t.jsx(W,{onBack:a}),t.jsx(M,{})]})})};U.displayName="EventPage";export{U as default};
