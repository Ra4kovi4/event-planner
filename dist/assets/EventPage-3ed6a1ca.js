import{h as B,r as _,i as N,e as v,E as m,Q as c,j as t}from"./index-976becd9.js";import{f as E}from"./fetchEventById-e9c14784.js";import{L as b}from"./Loader-dac5b22a.js";import{u as x,C as W}from"./Container-260be401.js";import{B as C}from"./BackButton-15b4e8c1.js";const k=async s=>{try{const{data:a}=await B.delete(`/events/${s}`);return a}catch(a){console.log(a)}},P="_cardWrapper_9vswd_1",$="_titleWrapper_9vswd_17",I="_title_9vswd_17",L="_card_9vswd_1",D="_pictureBox_9vswd_40",F="_picture_9vswd_40",H="_categoryWrap_9vswd_62",S="_category_9vswd_62",T="_priority_9vswd_68",O="_location_9vswd_69",Q="_time_9vswd_70",R="_infoBox_9vswd_122",q="_info_9vswd_122",z="_timetable_9vswd_136",A="_description_9vswd_152",G="_deleteBtn_9vswd_160",J="_infoBtn_9vswd_180",K="_buttonContainer_9vswd_190",M="_editBtn_9vswd_198",e={cardWrapper:P,titleWrapper:$,title:I,card:L,pictureBox:D,picture:F,categoryWrap:H,category:S,priority:T,location:O,time:Q,infoBox:R,info:q,timetable:z,description:A,deleteBtn:G,infoBtn:J,buttonContainer:K,editBtn:M},U=()=>{const[s,a]=_.useState(null),{id:n}=N(),o=v(),{events:g,isLoading:l,page:r,totalPage:u,setIsLoading:i,getEvents:y,updatePage:h}=x(m);_.useEffect(()=>{w(n)},[n]);const w=async d=>{i(!0);try{const p=await E(d);a(p)}catch{c.error("Oops, something went wrong! Please try again later",{position:"top-right",autoClose:1e3})}finally{i(!1)}},f=async()=>{i(!0);try{await k(n),a(null),c.success("The event was successfully deleted ")}catch{c.error("Something went wrong, please try again")}finally{i(!1),y()}},j=async()=>{await f(),g.length===1&&u>1&&r>1?(h(r-1),o(`/?page=${r-1}`)):o(`/?page=${r}`)};return t.jsxs(t.Fragment,{children:[l&&t.jsx(b,{}),s&&!l&&t.jsx(t.Fragment,{children:t.jsxs("div",{className:e.cardWrapper,children:[t.jsx("div",{className:e.titleWrapper,children:t.jsx("h2",{className:e.title,children:s.title})}),t.jsxs("div",{className:e.card,children:[t.jsx("div",{className:e.pictureBox,children:t.jsx("img",{src:s.picture,alt:s.title,className:e.picture})}),t.jsxs("div",{className:e.info,children:[t.jsxs("p",{className:e.description,children:[s.description," "]}),t.jsx("div",{className:e.infoBox,children:t.jsxs("div",{className:e.categoryWrap,children:[t.jsx("div",{className:e.category,children:s.category}),t.jsx("div",{className:e.priority,"data-priority":s.priority,children:s.priority}),t.jsx("span",{className:e.location,children:s.location}),t.jsxs("span",{className:e.time,children:[s.selectDate," at ",s.selectTime]})]})}),t.jsxs("div",{className:e.buttonContainer,children:[t.jsx("button",{className:e.editBtn,type:"button",onClick:()=>o(`/${s._id}/edit`),children:"Edit"}),t.jsx("button",{className:e.deleteBtn,type:"button",onClick:j,children:"Delete event"})]})]})]})]})})]})},V=()=>{const s=v(),{page:a}=x(m),n=()=>{s(`/?page=${a}`)};return t.jsx(t.Fragment,{children:t.jsxs(W,{children:[t.jsx(C,{onBack:n}),t.jsx(U,{})]})})};V.displayName="EventPage";export{V as default};
